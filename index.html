<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>PPM Visualization</title>
    <style>

        body {
            background-color: #203040; /* #4d5d6c */
            font-family: Arial;
        }

        h1 {
            font-size: 42px;
            color: #FFA500;
            margin: 25px 0 25px 0;
        }

        canvas {
            background-color: #FFFFFF;
            border: 1px solid black;
        }

        #container {
            width: 1300px;
            margin: 0 auto;
            text-align: center;
            overflow: auto;
        }

        .input-labels {
          color: #FFFFFF;
        }

        #range-value {
          color: #FFFFFF
        }

        #number-of-dots {
          text-align: center;
          height: 30px;
          width: 100px;
        }

        #ppm-color {
          height: 30px;
          width: 80px;
        }


    </style>
</head>

<body>
    <div id="container">
        <h1>PPM Data Visualization</h1>
        <label for="number-of-dots" class="input-labels">Select PPM (1 - 4000)</label>
        <br>
        <br>
        <input type="number" id="number-of-dots" name="number-of-dots" min="1" max="4000" value="400" autofocus>
        <span id="range-value"></span>
        <label for="ppm-color" class="input-labels">Select Color</label>
        <input type="color" id="ppm-color" name="ppm-color" value="#ff0000">
        <p><button type="button" id="runPPM">Display PPM</button></p>
        <br>
        <br>
        <canvas id="canvas" width="660px" height="660px"></canvas>
    </div>
    <br><br><br><br><br><br>
    <script>


        // if enter key pressed run "calculatePPM" function
        let onEnter = document.getElementById('number-of-dots');
        onEnter.addEventListener('keyup', function(event) {
          if (event.keyCode === 13) {
            event.preventDefault();
            document.getElementById('runPPM').click();
          }
        });

        function calculatePPM() {
          let canvas = document.getElementById('canvas');
          let ctx = canvas.getContext('2d');
          let width = canvas.width;
          let height = canvas.height;
          let dots = [];
          let numberOfDots = document.getElementById('number-of-dots').value;
          let dotColor = document.getElementById('ppm-color').value;
          let maxRange = document.getElementById('number-of-dots').max;
          let minRange = document.getElementById('number-of-dots').min;

          // class for creating each individual dot
          class Dot {
            constructor() {
              this.x = Math.random() * width;
              this.y = Math.random() * height;
              this.z = Math.random() * width;
              this.radius = ((width / 100) / 2) - (this.z / (width / 2));
            }

            draw() {
              ctx.globalAlpha = Math.abs(1 - (this.z / 1.5) / width);
              ctx.beginPath();
              ctx.arc(this.x, this.y, this.radius, 0, 360);
              ctx.fillStyle = dotColor;
              ctx.fill();
              ctx.closePath();
            }
          }

          if (numberOfDots >= minRange && numberOfDots <= maxRange) {
            // add all the dots to the dots array
            for (let i = 0; i < numberOfDots; i++) {
              dots.push(new Dot());
            }

            // clear all previous drawing from the canvas
            ctx.clearRect(0, 0, width, height);

            // Loop through the dots array and draw every dot
            for (var i = 0; i < dots.length; i++) {
              dots[i].draw();
            }
          } else { // if number of dots outside of range send an alert to the user
            alert('PPM out of range. Set range between 1 & ' + maxRange);
          }
        }



        // when 'Display PPM' button is clicked run calculatePPM function
        document.getElementById("runPPM").onclick = function() {
            calculatePPM();
        }

    </script>
</body>

</html>
